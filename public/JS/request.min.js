function set_auth(){$.ajaxSetup({headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/x-www-form-urlencoded",Authorization:"bearer "+getCookie("token")}})}function login(){clear_err(),1==validate(["username","password"])&&$.post("/a/login",{username:$("#username").val(),password:$("#password").val()},(function(e,t,o){"success"==t&&1==e.success&&e.token?(setCookie("token",e.token),go_to_web("/u/home")):display_err(e.msg)}))}function logout(){confirm("Are you sure, you want to Logout")&&(set_auth(),$.post("/a/logout",{},(function(e,t,o){"success"!=t||1!=e.success&&0!=e.success||(setCookie("token",""),document.location.reload())})))}function new_account(){clear_err(),1==validate(["name","username","password","cpassword","mobile_no","email","city","state","country"])&&($("#password").val()==$("#cpassword").val()?$.post("/a/new_account",{name:$("#name").val(),username:$("#username").val(),password:$("#password").val(),mobile_no:$("#mobile_no").val(),email:$("#email").val(),city:$("#city").val(),state:$("#state").val(),country:$("#country").val()},(function(e,t,o){"success"==t&&1==e.success?go_to_web("/a/login"):display_err(e.msg)})):display_err("Both password and c-password must match"))}function get_cart(){set_auth(),$.get("/u/get_cart",{},(function(e,t,o){"success"==t&&1==e.success&&display_cart(e.body)}))}function rm_cart(e){""!=getCookie("token")?(set_auth(),$.post("/u/rm_cart",{product_id:e},(function(e,t,o){alert(e.msg),document.location.reload(),pay_amount=parseInt(document.getElementById("total_cost").innerText),$.post("/u/pay_cart",{pay_amount:pay_amount},(function(e,t,o){}))}))):go_to_web("/a/login")}function ch_cart(e){""!=getCookie("token")?(set_auth(),pay_amount=parseInt(document.getElementById("total_cost").innerText),$.post("/u/pay_cart",{pay_amount:pay_amount},(function(t,o,a){1==t.success&&"success"==o&&$.post("/u/ch_cart",{product_id:e,product_qty:parseInt(document.getElementById("item"+e).innerText)},(function(e,t,o){document.location.reload()}))}))):go_to_web("/a/login")}function add_cart(e){""!=getCookie("token")?(set_auth(),$.post("/u/add_cart",{product_id:e,product_qty:1},(function(e,t,o){alert(e.msg)}))):go_to_web("/a/login")}function get_home(){$.post("/u/home",{},(function(e,t,o){"success"==t&&1==e.success&&display_home(e.category,e.body)}))}function get_category_ls(){$.post("/u/category",{},(function(e,t,o){"success"==t&&1==e.success&&display_category_ls(e.body)}))}function get_category(e){$.post("/u/get_category",{category:e},(function(e,t,o){"success"==t&&1==e.success&&display_home(e.category,e.body)}))}function save_account(){clear_err(),1==validate(["name","mobile_no","email","city","state","country"])&&(set_auth(),$.post("/a/ch_account",{name:$("#name").val(),"personal.mobile_no":$("#mobile_no").val(),"personal.email":$("#email").val(),"address.city":$("#city").val(),"address.state":$("#state").val(),"address.country":$("#country").val()},(function(e,t,o){"success"==t&&1==e.success?go_to_web("/a/account"):display_err(e.msg)})))}function del_account(){var e=prompt("Are you sure you want to delete your account? If yes then enter your password to Continue!","Your Password");""!=getCookie("token")&&e?(set_auth(),$.post("/a/rm_account",{password:e},(function(e,t,o){"success"==t&&1==e.success?(setCookie("token",""),go_to_web("/a/login")):alert(e.msg)}))):go_to_web("/a/login")}function get_account(){""!=getCookie("token")?(set_auth(),$.post("/a/get_account",{},(function(e,t,o){"success"==t&&1==e.success&&display_account(e.body),document.getElementById("name").disabled=!0,document.getElementById("username").disabled=!0,document.getElementById("mobile_no").disabled=!0,document.getElementById("email").disabled=!0,document.getElementById("city").disabled=!0,document.getElementById("state").disabled=!0,document.getElementById("country").disabled=!0}))):go_to_web("/a/login")}function get_order(){set_auth(),$.post("/u/order",{},(function(e,t,o){"success"==t?display_order(e.body):alert(e.msg)}))}function place_order(){set_auth(),$.get("/u/bill",{},(function(e,t,o){e=e.body,$.post("/u/place_order",{pay_type:$("#pay_type").val(),pay_amount:(e.pay_amount*(1+e.service_tax/100+e.delivery_chrg/100)).toFixed(2),name:$("#rname").val(),msg:$("#msg").val(),address:$("#addr").val(),mobile_no:$("#mobile_no").val()},(function(e,t,o){"success"==t&&1==e.success?go_to_web("/u/order_confirm?order_id="+e.order_id+"&pay_type="+$("#pay_type").val()):alert(e.msg)}))}))}function cancel_order(e){1==confirm("Are you sure you want to cancel your order? *Charges May Apply")&&(set_auth(),$.post("/u/cancel_order",{order_id:e},(function(e,t,o){"success"==t?window.location.reload():alert(e.msg)})))}function get_product(){var e=new URLSearchParams(window.location.search);$.post("/u/product",{product_id:e.get("id")},(function(e,t,o){"success"==t&&display_product(e.body)}))}function get_bill(){set_auth(),$.get("/u/bill",{},(function(e,t,o){"success"==t&&1==e.success?display_bill(e.body):alert(e.msg)}))}